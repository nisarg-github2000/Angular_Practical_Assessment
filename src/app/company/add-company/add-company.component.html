<h2>Add Company</h2>
<div class="container-fluid">
    <div class="row justify-content-end">
        <a class="btn btn-link" routerLink="/">
            <span class="fa fa-arrow-left"></span> Back to list
        </a>
        <button class="btn btn-info" (click)="addBranch()">
            <span class="fa fa-plus"></span> Add Branch
        </button>
    </div>
    <div class="row">
        <div class="col-4">
            <form [formGroup]="addForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label>Company Id:</label>
                    <input type="text" formControlName="id" class="form-control" [value]="id">
                </div>
                <div class="form-group">
                    <label>Company Name:</label>
                    <input type="text" formControlName="name" class="form-control"
                        [ngClass]="{'is-invalid':(submitted || f.name.touched) && f.name.errors}">
                    <div class="invalid-feedback" *ngIf="f.name.errors">
                        <div *ngIf="f.name.errors.required">field is required</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Company Email:</label>
                    <input type="text" formControlName="email" class="form-control"
                        [ngClass]="{'is-invalid':(submitted || f.email.touched) && f.email.errors}">
                    <div class="invalid-feedback" *ngIf="f.email.errors">
                        <div *ngIf="f.email.errors.required">field is required</div>
                        <div *ngIf="f.email.errors.email">Enter valid email</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Address:</label>
                    <input type="text" formControlName="address" class="form-control"
                        [ngClass]="{'is-invalid':(submitted || f.address.touched) && f.address.errors}">
                    <div class="invalid-feedback" *ngIf="f.address.errors">
                        <div *ngIf="f.address.errors.required">field is required</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Total Employees:</label>
                    <input type="number" formControlName="totalEmployee" class="form-control"
                        [ngClass]="{'is-invalid':(submitted || f.totalEmployee.touched) && f.totalEmployee.errors}">
                    <div class="invalid-feedback" *ngIf="f.totalEmployee.errors">
                        <div *ngIf="f.totalEmployee.errors.required">field is required</div>
                        <div *ngIf="f.totalEmployee.errors.min">value must be > 0</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>is Active? :</label>
                    <select formControlName="isCompanyActive" class="form-control"
                        [ngClass]="{'is-invalid':(submitted || f.isCompanyActive.touched) && f.isCompanyActive.errors}">
                        <option value="true">Yes</option>
                        <option value="false">No</option>
                    </select>
                    <div class="invalid-feedback" *ngIf="f.isCompanyActive.errors">
                        <div *ngIf="f.isCompanyActive.errors.required">field is required</div>
                        <div *ngIf="f.isCompanyActive.errors.min">value must be > 0</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Total Branches:<b>{{branches.length}}</b></label>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-success mr-2">Add</button>
                    <a routerLink="/" class="text-primary" style="cursor: pointer   ;">Cancel</a>
                </div>
            </form>
        </div>
        <div class="col-1" style="border-right: 3px solid #343a40;"></div>

        <ng-container *ngIf="addBranchVisible">
            <div class="col-3">
                <form [formGroup]="branchesForm" (ngSubmit)="onBranchSubmit()">
                    <div class="form-group">
                        <h3>Add Branch</h3>
                    </div>
                    <div class="form-group">
                        <label>Branch Id:</label>
                        <input type="text" formControlName="branchId" class="form-control" disabled [value]="branchId">
                        <div class="invalid-feedback" *ngIf="branchesControl.branchId.errors">
                            <div *ngIf="branchesControl.branchId.errors.required">field is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Branch Name:</label>
                        <input type="text" formControlName="branchName" class="form-control"
                            [ngClass]="{'is-invalid':(branchSubmitted ||branchesControl.branchName.touched) && branchesControl.branchName.errors}">
                        <div class="invalid-feedback" *ngIf="branchesControl.branchName.errors">
                            <div *ngIf="branchesControl.branchName.errors.required">field is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Branch Address:</label>
                        <input type="text" formControlName="address" class="form-control"
                            [ngClass]="{'is-invalid':(branchSubmitted ||branchesControl.address.touched) && branchesControl.address.errors}">
                        <div class="invalid-feedback" *ngIf="branchesControl.address.errors">
                            <div *ngIf="branchesControl.address.errors.required">field is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-success mr-2">Add</button>
                        <button type="button" class="btn btn-danger"
                            (click)="addBranchVisible=false;branchSubmitted=false;branchesForm.reset()"> Cancel
                        </button>
                    </div>
                </form>
            </div>
            <!-- <div class="col-1" style="border-left: 3px solid #343a40;"></div> -->
        </ng-container>

    </div>
</div>